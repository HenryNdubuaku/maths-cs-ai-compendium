<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 280" width="750" height="280" font-family="Arial, sans-serif">
  <defs>
    <marker id="dfe-arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#666"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="375" y="24" font-size="14" font-weight="bold" fill="#333" text-anchor="middle">Dual Encoder vs Fusion Encoder</text>

  <!-- Divider -->
  <line x1="375" y1="38" x2="375" y2="260" stroke="#ccc" stroke-width="1" stroke-dasharray="6,4"/>

  <!-- === Left Panel: Dual Encoder === -->
  <text x="185" y="52" font-size="12" font-weight="bold" fill="#3498db" text-anchor="middle">Dual Encoder</text>

  <!-- Image input -->
  <rect x="30" y="72" width="55" height="35" rx="4" fill="#eee" stroke="#ccc" stroke-width="1"/>
  <rect x="37" y="78" width="15" height="12" rx="1" fill="#3498db" fill-opacity="0.3"/>
  <rect x="55" y="82" width="12" height="10" rx="1" fill="#27ae60" fill-opacity="0.3"/>
  <text x="57" y="118" font-size="8" fill="#999" text-anchor="middle">Image</text>

  <!-- Text input -->
  <rect x="30" y="155" width="55" height="35" rx="4" fill="#eee" stroke="#ccc" stroke-width="1"/>
  <text x="57" y="175" font-size="8" fill="#666" text-anchor="middle">Text</text>
  <text x="57" y="200" font-size="8" fill="#999" text-anchor="middle">Query</text>

  <!-- Arrow to image encoder -->
  <line x1="85" y1="90" x2="110" y2="90" stroke="#3498db" stroke-width="1.2" marker-end="url(#dfe-arrow)"/>

  <!-- Image Encoder -->
  <rect x="115" y="68" width="100" height="44" rx="8" fill="#3498db" fill-opacity="0.12" stroke="#3498db" stroke-width="1.5"/>
  <text x="165" y="87" font-size="10" fill="#333" text-anchor="middle">Image Encoder</text>
  <text x="165" y="101" font-size="9" fill="#666" text-anchor="middle">(ViT)</text>

  <!-- Arrow to text encoder -->
  <line x1="85" y1="172" x2="110" y2="172" stroke="#e74c3c" stroke-width="1.2" marker-end="url(#dfe-arrow)"/>

  <!-- Text Encoder -->
  <rect x="115" y="150" width="100" height="44" rx="8" fill="#e74c3c" fill-opacity="0.12" stroke="#e74c3c" stroke-width="1.5"/>
  <text x="165" y="169" font-size="10" fill="#333" text-anchor="middle">Text Encoder</text>
  <text x="165" y="183" font-size="9" fill="#666" text-anchor="middle">(Transformer)</text>

  <!-- Vectors -->
  <line x1="215" y1="90" x2="248" y2="90" stroke="#3498db" stroke-width="1.2" marker-end="url(#dfe-arrow)"/>
  <line x1="215" y1="172" x2="248" y2="172" stroke="#e74c3c" stroke-width="1.2" marker-end="url(#dfe-arrow)"/>

  <!-- Vector boxes -->
  <rect x="252" y="78" width="40" height="24" rx="4" fill="#3498db" fill-opacity="0.2" stroke="none"/>
  <text x="272" y="94" font-size="9" fill="#3498db" text-anchor="middle">v_i</text>

  <rect x="252" y="160" width="40" height="24" rx="4" fill="#e74c3c" fill-opacity="0.2" stroke="none"/>
  <text x="272" y="176" font-size="9" fill="#e74c3c" text-anchor="middle">v_t</text>

  <!-- Cosine similarity -->
  <line x1="272" y1="102" x2="272" y2="158" stroke="#f39c12" stroke-width="1.5" stroke-dasharray="4,3"/>
  <rect x="245" y="120" width="55" height="22" rx="4" fill="#f39c12" fill-opacity="0.12" stroke="#f39c12" stroke-width="1"/>
  <text x="272" y="135" font-size="9" fill="#f39c12" text-anchor="middle" font-weight="bold">cos(v_i, v_t)</text>

  <!-- Label -->
  <text x="185" y="230" font-size="10" fill="#666" text-anchor="middle">Independent encoders</text>
  <text x="185" y="245" font-size="10" fill="#27ae60" text-anchor="middle" font-weight="bold">Fast retrieval</text>
  <text x="185" y="260" font-size="9" fill="#999" text-anchor="middle">O(1) similarity computation</text>

  <!-- === Right Panel: Fusion Encoder === -->
  <text x="565" y="52" font-size="12" font-weight="bold" fill="#9b59b6" text-anchor="middle">Fusion Encoder</text>

  <!-- Image input -->
  <rect x="400" y="72" width="55" height="35" rx="4" fill="#eee" stroke="#ccc" stroke-width="1"/>
  <rect x="407" y="78" width="15" height="12" rx="1" fill="#3498db" fill-opacity="0.3"/>
  <rect x="425" y="82" width="12" height="10" rx="1" fill="#27ae60" fill-opacity="0.3"/>
  <text x="427" y="118" font-size="8" fill="#999" text-anchor="middle">Image</text>

  <!-- Text input -->
  <rect x="400" y="155" width="55" height="35" rx="4" fill="#eee" stroke="#ccc" stroke-width="1"/>
  <text x="427" y="175" font-size="8" fill="#666" text-anchor="middle">Text</text>
  <text x="427" y="200" font-size="8" fill="#999" text-anchor="middle">Query</text>

  <!-- Image features -->
  <line x1="455" y1="90" x2="490" y2="90" stroke="#3498db" stroke-width="1.2"/>
  <!-- Text features -->
  <line x1="455" y1="172" x2="490" y2="172" stroke="#e74c3c" stroke-width="1.2"/>

  <!-- Token row (image tokens) -->
  <rect x="492" y="80" width="12" height="12" rx="2" fill="#3498db" fill-opacity="0.4" stroke="none"/>
  <rect x="506" y="80" width="12" height="12" rx="2" fill="#3498db" fill-opacity="0.4" stroke="none"/>
  <rect x="520" y="80" width="12" height="12" rx="2" fill="#3498db" fill-opacity="0.4" stroke="none"/>
  <rect x="534" y="80" width="12" height="12" rx="2" fill="#3498db" fill-opacity="0.4" stroke="none"/>

  <!-- Token row (text tokens) -->
  <rect x="492" y="165" width="12" height="12" rx="2" fill="#e74c3c" fill-opacity="0.4" stroke="none"/>
  <rect x="506" y="165" width="12" height="12" rx="2" fill="#e74c3c" fill-opacity="0.4" stroke="none"/>
  <rect x="520" y="165" width="12" height="12" rx="2" fill="#e74c3c" fill-opacity="0.4" stroke="none"/>

  <!-- Arrows converging -->
  <line x1="540" y1="90" x2="580" y2="115" stroke="#3498db" stroke-width="1.2" marker-end="url(#dfe-arrow)"/>
  <line x1="540" y1="172" x2="580" y2="148" stroke="#e74c3c" stroke-width="1.2" marker-end="url(#dfe-arrow)"/>

  <!-- Cross-Attention Transformer -->
  <rect x="585" y="100" width="130" height="62" rx="8" fill="#9b59b6" fill-opacity="0.12" stroke="#9b59b6" stroke-width="1.5"/>
  <text x="650" y="122" font-size="10" fill="#333" text-anchor="middle">Cross-Attention</text>
  <text x="650" y="136" font-size="10" fill="#333" text-anchor="middle">Transformer</text>
  <text x="650" y="152" font-size="9" fill="#9b59b6" text-anchor="middle">(Deep Fusion)</text>

  <!-- Bidirectional attention arrows inside -->
  <line x1="605" y1="108" x2="695" y2="108" stroke="#9b59b6" stroke-width="0.8" stroke-dasharray="2,2"/>
  <line x1="695" y1="155" x2="605" y2="155" stroke="#9b59b6" stroke-width="0.8" stroke-dasharray="2,2"/>

  <!-- Label -->
  <text x="565" y="230" font-size="10" fill="#666" text-anchor="middle">Token-level interaction</text>
  <text x="565" y="245" font-size="10" fill="#27ae60" text-anchor="middle" font-weight="bold">Richer understanding</text>
  <text x="565" y="260" font-size="9" fill="#999" text-anchor="middle">O(n*m) cross-attention cost</text>
</svg>